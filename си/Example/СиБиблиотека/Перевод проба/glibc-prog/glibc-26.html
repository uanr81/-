<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE> Библиотека языка C GNU glibc: Информационная Система</TITLE>
 <LINK HREF="glibc-27.html" REL=next>
 <LINK HREF="glibc-25.html" REL=previous>
 <LINK HREF="glibc.html#toc26" REL=contents>
</HEAD>
<body bgcolor="#DDE1C2"><b><a href="http://www.opennet.ru/docs/">Архив документации OpenNet.ru</a> / 
Раздел "<a href="http://www.opennet.ru/docs/124.shtml">Программирование, языки</a>" /
<a href="index.html">Индекс</a>
</b>
<hr noshade size=1>

<A HREF="glibc-27.html">Вперед</A>
<A HREF="glibc-25.html">Назад</A>
<A HREF="glibc.html#toc26">Содержание</A>
<HR>
<H2><A NAME="s26">26. Информационная Система</A></H2>

<P>
<P>
<P>Эта глава описывает функции, которые возвращают информацию 
относительно специфической машины, тип аппаратных средств, тип 
программного обеспечения, и имя индивидуальной машины.
<P>
<H2><A NAME="ss26.1">26.1 Главная Идентификация</A>
</H2>

<P>
<P>Этот раздел объясняет, как идентифицировать специфическую 
машину, на которой ваша программа выполняется. Идентификация машины 
состоит из имени главной ЭВМ Internet и адреса Internet; см. Раздел 
11.5 [Именное пространство Internet].
<P>Прототипы для этих функций появляются в " unistd.h ". Команды 
оболочки hostname и hostid работают, вызывая их.
<P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
       int gethostname (char *name, size_t size)  (функция)
</PRE>
</CODE></BLOCKQUOTE>

Эта функция возвращает имя главной машины в массиве name. 
Аргумент size определяет размер этого массива, в байтах.
<P>Возвращаемое значение - 0 при успехе и -1 при отказе. В 
библиотеке GNU C gethostname терпит неудачу, если размер не 
достаточно большой; Вы можете пробовать снова с большим массивом. 
Следующее errno условие ошибки определено для этой функции:
<DL>
<DT><B>ENAMETOOLONG </B><DD><P>
<P>Аргумент size - меньше чем размер главного имени плюс один.
</DL>

На некоторых системах, имеется символ для максимально возможной 
длины главного имени: MAXHOSTNAMELEN. Он определен в " sys/param.h 
". Но Вы не можете расчитывать на его существование, так что более 
чисто обработать отказ и попытаться снова.
<P>Gethostname сохраняет начало главного имени в name, даже если 
главное имя полностью не будет сохранено. Для некоторых целей, 
усеченное главное имя достаточно. Если так, то Вы можете 
игнорировать код ошибки.
<BLOCKQUOTE><CODE>
<PRE>
       int sethostname (const char *name, size_t length)  (функция)
</PRE>
</CODE></BLOCKQUOTE>
       Sethostname функция устанавливает имя главной машины как name. 
Только привилегированные процессы могут делать это. Обычно это 
случается только один раз, при начальной загрузке системы.
<P>Возвращаемое значение - 0 при успехе и -1 при отказе. Следующее 
errno условие ошибки определено для этой функции:
<DL>
<DT><B>EPERM </B><DD><P>Этот процесс не может устанавливать главное имя, потому 
что он не привилегирован.
</DL>

<BLOCKQUOTE><CODE>
<PRE>
       long int gethostid (void)  (функция)
</PRE>
</CODE></BLOCKQUOTE>

Эта функция возвращает " главный ID " машины. Обычно, это - 
первичный адрес Internet этой машины, преобразованный в long int. 
Но на некоторых системах это - бессмысленное но уникальное число, 
которое является жестко закодированным для каждой машины.
<BLOCKQUOTE><CODE>
<PRE>
       int sethostid (long int id)  (функция)
</PRE>
</CODE></BLOCKQUOTE>
       Sethostid функция устанавливает " главный ID " главной машины 
id. Только привилегированным процессам позволяются делать это. 
Обычно это случается только один раз, при начальной загрузке 
системы.
<P>Возвращаемое значение - 0 при успехе и -1 при отказе. Следующие 
errno условия ошибки определено для этой функции:
<DL>
<DT><B>EPERM </B><DD><P>Этот процесс не может устанавливать главное имя, потому 
что он не привилегирован.
<DT><B>ENOSYS </B><DD><P>операционная система не поддерживает установку главного 
ID. На некоторых системах, главный ID - бессмысленное но уникальное 
число, жестко закодированное для каждой машины.
</DL>

26.2 Идентификация Типа АППАРАТНЫХ СРЕДСТВ/ПРОГРАММНОГО 
ОБЕСПЕЧЕНИЯ
<P>
<P>Вы можете использовать uname функцию, чтобы выяснить некоторую 
информацию относительно типа компьютера. Эта функция и связанный 
тип данных объявлены в заглавном файле " sys/utsname.h ".
<BLOCKQUOTE><CODE>
<PRE>
       struct utsname     (тип данных)
</PRE>
</CODE></BLOCKQUOTE>

Структура utsname используется, чтобы содержать информацию, 
возвращенную uname функцией. Она имеет следующие элементы:
<BLOCKQUOTE><CODE>
<PRE>
                char sysname[]
</PRE>
</CODE></BLOCKQUOTE>

Это - имя используемой операционной системы.
<BLOCKQUOTE><CODE>
<PRE>
                char nodename[]
</PRE>
</CODE></BLOCKQUOTE>

Это - сетевое имя этого специфического компьютера. В библиотеке 
GNU, значение - такое же как возвращенное gethostname; см. Раздел 
26.1 [Главная Идентификация].
<BLOCKQUOTE><CODE>
<PRE>
                char release[]
</PRE>
</CODE></BLOCKQUOTE>

Это - текущий уровень выпуска реализации операционной системы.
<BLOCKQUOTE><CODE>
<PRE>
                char version[]
</PRE>
</CODE></BLOCKQUOTE>

Это - текущая версия выпуска операционной системы.
<BLOCKQUOTE><CODE>
<PRE>
                char machine[]
</PRE>
</CODE></BLOCKQUOTE>

Это - описание типа аппаратных средств, которые являются 
используемыми.
<P>Некоторые системы обеспечивают механизм, чтобы опросить ядро 
непосредственно для этой информации. На системах без такого 
механизма, библиотека GNU C вносит это поле, основанное на имени 
конфигурации, которое было определено при формировании и установке 
библиотеки.
<P>GNU использует имя с тремя частями, чтобы описать конфигурацию 
системы; три части - центральный процессор, изготовитель и тип 
системы, и они отделяются подчеркиванием. Любая возможная 
комбинация трех имен потенциально значима, но большинство таких 
комбинаций бессмысленно практически и даже значимые не обязательно 
обеспечиваются любой специфической программой GNU.
<P>Так как значение в machine, как предполагается,  описывает 
только аппаратные средства, оно состоит из первых двух частей имени 
конфигурации " центральный процессор - изготовитель ". Например:
<P>"sparc-sun",  "i386-anything",  "m68k-hp",  "m68k-sony", "m68k-sun", "mips-dec"
<BLOCKQUOTE><CODE>
<PRE>
       int uname (struct utsname *info)  (функция)
</PRE>
</CODE></BLOCKQUOTE>
       Uname функция вносит в структуру, указанную info информацию 
относительно операционной системы и главной машины. Неотрицательное 
значение указывает, что данные были успешно сохранены.
<P>-1 указывает ошибку. Единственая возможная ошибка - EFAULT, 
которую мы обычно не упоминаем, поскольку она - всегда возможна.
<P>
<P>
<HR>
<A HREF="glibc-27.html">Вперед</A>
<A HREF="glibc-25.html">Назад</A>
<A HREF="glibc.html#toc26">Содержание</A>
<hr noshade size=1>
<b><a href="http://www.opennet.ru/docs/">Архив документации на OpenNet.ru</a>
</BODY>
</HTML>

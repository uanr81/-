usermod(8)                     Команды управления системой                     usermod(8)

НАЗВАНИЕ
       usermod - изменяет учётную запись пользователя

СИНТАКСИС
       usermod [параметры] УЧЁТНАЯ_ЗАПИСЬ

ОПИСАНИЕ
       Команда usermod изменяет системные файлы учётных записей согласно переданным в
       командной строке параметрам.

ПАРАМЕТРЫ
       Параметры команды usermod:

       -a, --append
           Добавить пользователя в дополнительную группу(ы). Использовать только вместе с
           параметром -G.

       -c, --comment КОММЕНТАРИЙ
           Новое значение поля комментария в файле пользовательских паролей. Обычно его
           изменяют с помощью программы chfn(1).

       -d, --home HOME_DIR
           Домашний каталог нового пользователя.

           Если указан параметр -m, то содержимое текущего домашнего каталога будет
           перемещено в новый домашний каталог, который будет создан, если он ещё не
           существует.

       -e, --expiredate ДАТА_УСТАРЕВАНИЯ
           Дата, когда учётная запись пользователя будет заблокирована. Дата задаётся в
           формате ГГГГ-ММ-ДД.

           Пустое значение аргумента ДАТА_УСТАРЕВАНИЯ отключает устаревание учётной
           записи.

           Для этого параметра требуется файл /etc/shadow. При отсутствии в /etc/shadow
           создаётся необходимая запись.

       -f, --inactive ДНЕЙ
           Количество дней, которые должны пройти после устаревания пароля, чтобы учётная
           запись заблокировалась навсегда.

           Если указано значение 0, то учётная запись блокируется сразу после устаревания
           пароля, а при значении -1 данная возможность не используется.

           Для этого параметра требуется файл /etc/shadow. При отсутствии в /etc/shadow
           создаётся необходимая запись.

       -g, --gid ГРУППА
           Имя или числовой идентификатор новой первичной группы пользователя. Группа с
           таким именем должна существовать.

           Все файлы в домашнем каталоге пользователя, принадлежавшие предыдущей
           первичной группе пользователя, будут принадлежать новой группе.

           Группового владельца файлов вне домашнего каталога нужно изменить вручную.

       -G, --groups ГРУППА1[,ГРУППА2,...[,ГРУППАN]]]
           Список дополнительных групп, в которых числится пользователь. Перечисление
           групп осуществляется через запятую, без промежуточных пробелов. На указанные
           группы действуют те же ограничения, что и для группы указанной в параметре -g.

           Если пользователь — член группы, которой в указанном списке нет, то
           пользователь удаляется из этой группы. Такое поведение можно изменить с
           помощью параметра -a, при указании которого к уже имеющемуся списку групп
           пользователя добавляется список указанных дополнительных групп.

       -l, --login НОВОЕ_ИМЯ
           Имя пользователя будет изменено с ИМЯ на НОВОЕ_ИМЯ. Больше ничего не меняется.
           В частности, вероятно, должно быть изменено имя домашнего каталога и почтового
           ящика, чтобы отразить изменение имени пользователя.

       -L, --lock
           Заблокировать пароль пользователя. Это делается помещением символа «!» в
           начало шифрованного пароля, чтобы приводит к блокировке пароля. Не используйте
           этот параметр вместе с -p или -U.

           Замечание: если вы хотите заблокировать учётную запись (не только доступ по
           паролю), также установите значение EXPIRE_DATE в 1.

       -m, --move-home
           Переместить содержимое домашнего каталога в новое место.

           Этот параметр можно использовать только с параметром -d (или --home).

           Команда usermod пытается изменить владельцев файлов и копирует права, ACL и
           расширенные атрибуты, но после неё всё равно могут потребоваться некоторые
           ручные действия.

       -o, --non-unique
           При использовании с параметром -u, этот параметр позволяет указывать не
           уникальный числовой идентификатор пользователя.

       -p, --password ПАРОЛЬ
           Шифрованное значение пароля, которое возвращает функция crypt(3).

           Замечание: Этот параметр использовать не рекомендуется, так как пароль (или не
           шифрованный пароль) будет видим другими пользователям в списке процессов.

           Пароль будет записан в локальный файл /etc/passwd или /etc/shadow. Это может
           вызвать расхождения с базой данных паролей, настроенной в PAM.

           Вы должны проверить, что пароль соответствует политике системных паролей.

       -R, --root КАТ_CHROOT
           Выполнить изменения в каталоге КАТ_CHROOT и использовать файлы настройки из
           каталога КАТ_CHROOT.

       -s, --shell ОБОЛОЧКА
           Имя новой регистрационной оболочки пользователя. Если задать пустое значение,
           то будет использована регистрационная оболочка по умолчанию.

       -u, --uid UID
           Новый числовой идентификатор пользователя (UID).

           Оно должно быть уникальным, если не используется параметр -o. Значение должно
           быть неотрицательным.

           Для почтового ящика и всех файлов, которыми владеет пользователь и которые
           расположены в его домашнем каталоге, идентификатор владельца файла будет
           изменён автоматически.

           Для файлов, расположенных вне домашнего каталога, идентификатор нужно изменять
           вручную.

           Никаких проверок по UID_MIN, UID_MAX, SYS_UID_MIN или SYS_UID_MAX из
           /etc/login.defs не производится.

       -U, --unlock
           Разблокировать пароль пользователя. Это выполняется удалением символа «!» из
           начала шифрованного пароля. Не используйте этот параметр вместе с -p или -L.

           Замечание: если вы хотите разблокировать учётную запись (не только доступ по
           паролю), также установите значение EXPIRE_DATE (например, в to 99999 или
           равным значению EXPIRE из файла /etc/default/useradd).

       -v, --add-sub-uids FIRST-LAST
           Add a range of subordinate uids to the user's account.

           This option may be specified multiple times to add multiple ranges to a users
           account.

           No checks will be performed with regard to SUB_UID_MIN, SUB_UID_MAX, or
           SUB_UID_COUNT from /etc/login.defs.

       -V, --del-sub-uids FIRST-LAST
           Remove a range of subordinate uids from the user's account.

           This option may be specified multiple times to remove multiple ranges to a
           users account. When both --del-sub-uids and --add-sub-uids are specified, the
           removal of all subordinate uid ranges happens before any subordinate uid range
           is added.

           No checks will be performed with regard to SUB_UID_MIN, SUB_UID_MAX, or
           SUB_UID_COUNT from /etc/login.defs.

       -w, --add-sub-gids FIRST-LAST
           Add a range of subordinate gids to the user's account.

           This option may be specified multiple times to add multiple ranges to a users
           account.

           No checks will be performed with regard to SUB_GID_MIN, SUB_GID_MAX, or
           SUB_GID_COUNT from /etc/login.defs.

       -W, --del-sub-gids FIRST-LAST
           Remove a range of subordinate gids from the user's account.

           This option may be specified multiple times to remove multiple ranges to a
           users account. When both --del-sub-gids and --add-sub-gids are specified, the
           removal of all subordinate gid ranges happens before any subordinate gid range
           is added.

           No checks will be performed with regard to SUB_GID_MIN, SUB_GID_MAX, or
           SUB_GID_COUNT from /etc/login.defs.

       -Z, --selinux-user SEUSER
           Новый пользователь SELinux для пользовательского входа.

           При пустом значении SEUSER пользовательское сопоставление SELinux для
           пользователя LOGIN удаляется (если есть).

ПРЕДОСТЕРЕЖЕНИЯ
       Вы должны убедиться, что от указанного пользователя не запущено никаких процессов,
       если при выполнении этой команды изменяется числовой пользовательский ID, имя
       пользователя или домашний каталог пользователя. В Linux команда usermod выполняет
       такую проверку, но на других архитектурах проверяется только присутствие
       пользователя в системе согласно данным utmp.

       Вы должны вручную изменить владельца всех файлов crontab или заданий at.

       Вы должны сделать все изменения NIS на сервере NIS самостоятельно.

НАСТРОЙКА
       На работу этого инструмента влияют следующие переменные настройки из
       /etc/login.defs:

       MAIL_DIR (строка)
           Почтовый каталог. Данный параметр нужен для управления почтовым ящиком при
           изменении или удалении учётной записи пользователя. Если параметр не задан, то
           используется значение указанное при сборке.

       MAIL_FILE (строка)
           Определяет расположение почтовых файлов пользователя относительно домашнего
           каталога.

       Переменные MAIL_DIR и MAIL_FILE используются командами useradd, usermod и userdel
       для создания, перемещения или удаления почты пользователя.

       MAX_MEMBERS_PER_GROUP (число)
           Максимальное количество членов в записи о группе. При достижения максимума
           заводится новая запись группы (строка) в /etc/group (с тем же именем, паролем
           и тем же GID).

           Значение по умолчанию равно 0, означающее, что ограничения на количество
           членов в группе нет.

           Данная возможность (разделение группы) позволяет ограничить длину строк в
           файле групп. Это полезно для ограничения длины строк групп NIS в 1024 символа.

           Если вам нужно такое ограничение, укажите значение 25.

           Замечание: разделение групп поддерживается не всеми инструментами (даже в
           наборе инструментов Shadow). Вы не должны использовать эту переменную, если
           вам действительно это ненужно.

       SUB_GID_MIN (number), SUB_GID_MAX (number), SUB_GID_COUNT (number)
           If /etc/subuid exists, the commands useradd and newusers (unless the user
           already have subordinate group IDs) allocate SUB_GID_COUNT unused group IDs
           from the range SUB_GID_MIN to SUB_GID_MAX for each new user.

           The default values for SUB_GID_MIN, SUB_GID_MAX, SUB_GID_COUNT are
           respectively 100000, 600100000 and 10000.

       SUB_UID_MIN (number), SUB_UID_MAX (number), SUB_UID_COUNT (number)
           If /etc/subuid exists, the commands useradd and newusers (unless the user
           already have subordinate user IDs) allocate SUB_UID_COUNT unused user IDs from
           the range SUB_UID_MIN to SUB_UID_MAX for each new user.

           The default values for SUB_UID_MIN, SUB_UID_MAX, SUB_UID_COUNT are
           respectively 100000, 600100000 and 10000.

ФАЙЛЫ
       /etc/group
           содержит информацию о группах

       /etc/gshadow
           содержит защищаемую информацию о группах

       /etc/login.defs
           содержит конфигурацию подсистемы теневых паролей

       /etc/passwd
           содержит информацию о пользователях

       /etc/shadow
           содержит защищаемую информацию о пользователях

       /etc/subgid
           Per user subordinate group IDs.

       /etc/subuid
           Per user subordinate user IDs.

СМОТРИТЕ ТАКЖЕ
       chfn(1), chsh(1), passwd(1), crypt(3), gpasswd(8), groupadd(8), groupdel(8),
       groupmod(8), login.defs(5), subgid(5), subuid(5), useradd(8), userdel(8).

shadow-utils 4.2                        03/26/2019                             usermod(8)

@node SFTP(1), SSH-ADD(1), SCP(1), Top
@chapter SFTP(1)

@table @asis
@item NAME
     sftp — программа безопасной передачи файлов

@item SYNOPSIS
     sftp [-@ref{man_ssh_sftp 1,, 1}@ref{man_ssh_sftp 2,, 2}@ref{man_ssh_sftp 4,, 4}@ref{man_ssh_sftp 6,, 6}@ref{man_ssh_sftp a,, a}@ref{man_ssh_sftp C,, C}@ref{man_ssh_sftp f,, f}@ref{man_ssh_sftp p,, p}@ref{man_ssh_sftp q,, q}@ref{man_ssh_sftp r,, r}@ref{man_ssh_sftp v,, v}] [@ref{man_ssh_sftp -B buffer_size,, -B buffer_size}] [@ref{man_ssh_sftp -b batchfile,, -b batchfile}] [@ref{man_ssh_sftp -c cipher,, -c cipher}]
          [@ref{man_ssh_sftp -D sftp_server_path,, -D sftp_server_path}] [@ref{man_ssh_sftp -F ssh_config,, -F ssh_config}] [@ref{man_ssh_sftp -i identity_file,, -i identity_file}] [@ref{man_ssh_sftp -l limit,, -l limit}]
          [@ref{man_ssh_sftp -o ssh_option,, -o ssh_option}] [@ref{man_ssh_sftp -P port,, -P port}] [@ref{man_ssh_sftp -R num_requests,, -R num_requests}] [@ref{man_ssh_sftp -S program,, -S program}]
          [@ref{man_ssh_sftp -s subsystem | sftp_server,, -s subsystem | sftp_server}] host
     sftp [user@@]host[:file ...]
     sftp [user@@]host[:dir[/]]
     sftp -b batchfile [user@@]host
@item Интерактивные команды
@display
     @ref{man_ssh_sftp bye,, bye}
     @ref{man_ssh_sftp cd path,, cd path}
     @ref{man_ssh_sftp chgrp grp path,, chgrp grp path}
     @ref{man_ssh_sftp chmod mode path,, chmod mode path}
     @ref{man_ssh_sftp chown own path,, chown own path}
     @ref{man_ssh_sftp df [-hi] [path],, df [-hi] [path]}
     @ref{man_ssh_sftp exit,, exit}
     @ref{man_ssh_sftp get [-afPpr] remote-path [local-path],, get [-afPpr] remote-path [local-path]}
     @ref{man_ssh_sftp help,, help}
     @ref{man_ssh_sftp lcd path,, lcd path}
     @ref{man_ssh_sftp lls [ls-options [path]],, lls [ls-options [path]]}
     @ref{man_ssh_sftp lmkdir path,, lmkdir path}
     @ref{man_ssh_sftp ln [-s] oldpath newpath,, ln [-s] oldpath newpath}
     @ref{man_ssh_sftp lpwd,, lpwd}
     @ref{man_ssh_sftp ls [-1afhlnrSt] [path],, ls [-1afhlnrSt] [path]}
     @ref{man_ssh_sftp lumask umask,, lumask umask}
     @ref{man_ssh_sftp mkdir path,, mkdir path}
     @ref{man_ssh_sftp progress,, progress}
     @ref{man_ssh_sftp put [-afPpr] local-path [remote-path],, put [-afPpr] local-path [remote-path]}
     @ref{man_ssh_sftp pwd,, pwd}
     @ref{man_ssh_sftp quit,, quit}
     @ref{man_ssh_sftp reget [-Ppr] remote-path [local-path],, reget [-Ppr] remote-path [local-path]}
     @ref{man_ssh_sftp reput [-Ppr] [local-path] remote-path,, reput [-Ppr] [local-path] remote-path}
     @ref{man_ssh_sftp rename oldpath newpath,, rename oldpath newpath}
     @ref{man_ssh_sftp rm path,, rm path}
     @ref{man_ssh_sftp rmdir path,, rmdir path}
     @ref{man_ssh_sftp symlink oldpath newpath,, symlink oldpath newpath}
     @ref{man_ssh_sftp version,, version}
     @ref{man_ssh_sftp !command,, !command}
     @ref{man_ssh_sftp !,, !}
     @ref{man_ssh_sftp ?,, ?}
@end display
@item DESCRIPTION
     sftp - это интерактивная программа для передачи файлов, похожая на ftp(1),
     которая выполняет все операции с использованием зашифрованного транспорта ssh(1). Она
     также может использовать многие функции ssh, такие как аутентификация и сжатие с
     открытым ключом. sftp подключается и входит на указанный хост, затем переходит в
     интерактивный командный режим.

     Второй формат использования будет извлекать файлы автоматически, если используется
     неинтерактивный метод аутентификации; в противном случае это будет сделано после
     успешной интерактивной аутентификации.

     Третий формат использования позволяет запускать sftp в удаленном каталоге.

     Окончательный формат использования позволяет автоматизировать сеансы с использованием
     опции -b. В таких случаях необходимо настроить неинтерактивную аутентификацию, чтобы
     устранить необходимость ввода пароля во время подключения (см. Sshd(8) и ssh-keygen(1)
     для получения подробной информации).

     Поскольку некоторые форматы использования используют символы двоеточия для отделения
     имен хостов от путей, адреса IPv6 должны быть заключены в квадратные скобки во
     избежание двусмысленности.

     Возможны следующие варианты:
@table @asis
@item     -1 @anchor{man_ssh_sftp 1}
             Указывает использование протокола версии 1.

@item     -2 @anchor{man_ssh_sftp 2}
             Указывает использование протокола версии 2.

@item     -4 @anchor{man_ssh_sftp 4}
             Заставляет sftp использовать только адреса IPv4.

@item     -6 @anchor{man_ssh_sftp 6}
             Заставляет sftp использовать только адреса IPv6.

@item     -a @anchor{man_ssh_sftp a}
             Попытка продолжить прерванную передачу, а не перезаписывать
             существующие частичные или полные копии файлов. Если частичное
             содержимое отличается от передаваемого, то результирующий файл может
             быть поврежден.

@item     -B buffer_size @anchor{man_ssh_sftp -B buffer_size}
             Укажите размер буфера, который использует sftp при передаче файлов. Большие
             буферы требуют меньше циклов обработки за счет более высокого потребления
             памяти. По умолчанию это байты 32768.

@item     -b batchfile @anchor{man_ssh_sftp -b batchfile}
             Пакетный режим читает серию команд из входного пакетного файла вместо
             стандартного ввода. Поскольку в нем отсутствует взаимодействие с
             пользователем, его следует использовать в сочетании с неинтерактивной
             аутентификацией. Пакетный файл может использовать ‘-’ для указания
             стандартного ввода. sftp прервет работу, если любая из следующих команд
             завершится неудачно: get, put, reget, reput, rename, ln, rm, mkdir, chdir,
             ls, lchdir, chmod, chown, chgrp, lpwd, df, symlink, и lmkdir. Завершение в
             случае ошибки может быть подавлено для каждой команды в отдельности путем
             добавления к команде префикса с символом ‘-’ (например, -rm /tmp/blah*).

@item     -C @anchor{man_ssh_sftp C}
             Включает сжатие (через флаг ssh -C).

@item     -c cipher @anchor{man_ssh_sftp -c cipher}
             Выбирает шифр, который будет использоваться для шифрования передачи данных.
             Эта опция напрямую передается в ssh(1).

@item     -D sftp_server_path @anchor{man_ssh_sftp -D sftp_server_path}
             Подключайтесь напрямую к локальному серверу sftp (а не через ssh(1)). Эта
             опция может быть полезна при отладке клиента и сервера.

@item     -F ssh_config @anchor{man_ssh_sftp -F ssh_config}
             Определяет альтернативный файл конфигурации для пользователя ssh(1). Эта
             опция напрямую передается в ssh(1).

@item     -f @anchor{man_ssh_sftp f}
             Требует, чтобы файлы были записаны на диск сразу после передачи. При загрузке
             файлов эта функция включается только в том случае, если на сервере
             реализовано расширение "fsync@@openssh.com".

@item     -i identity_file @anchor{man_ssh_sftp -i identity_file}
             Выбирает файл, из которого читается идентификатор (закрытый ключ) для
             аутентификации с открытым ключом. Эта опция напрямую передается в ssh(1).

@item     -l limit @anchor{man_ssh_sftp -l limit}
             Ограничивает используемую пропускную способность, указанную в Кбит/с.

@item     -o ssh_option @anchor{man_ssh_sftp -o ssh_option}
             Может использоваться для передачи параметров в ssh в формате, используемом в
             ssh_config(5). Это полезно для указания параметров, для которых нет
             отдельного флага командной строки sftp. Например, чтобы указать альтернативный
             порт, используйте: sftp -oPort=24. Для получения полной информации о
             параметрах, перечисленных ниже, и их возможных значений, смотри ssh_config(5).
@display
                   AddressFamily
                   BatchMode
                   BindAddress
                   CanonicalDomains
                   CanonicalizeFallbackLocal
                   CanonicalizeHostname
                   CanonicalizeMaxDots
                   CanonicalizePermittedCNAMEs
                   CertificateFile
                   ChallengeResponseAuthentication
                   CheckHostIP
                   Cipher
                   Ciphers
                   Compression
                   CompressionLevel
                   ConnectionAttempts
                   ConnectTimeout
                   ControlMaster
                   ControlPath
                   ControlPersist
                   GlobalKnownHostsFile
                   GSSAPIAuthentication
                   GSSAPIDelegateCredentials
                   HashKnownHosts
                   Host
                   HostbasedAuthentication
                   HostbasedKeyTypes
                   HostKeyAlgorithms
                   HostKeyAlias
                   HostName
                   IdentityFile
                   IdentitiesOnly
                   IPQoS
                   KbdInteractiveAuthentication
                   KbdInteractiveDevices
                   KexAlgorithms
                   LogLevel
                   MACs
                   NoHostAuthenticationForLocalhost
                   NumberOfPasswordPrompts
                   PasswordAuthentication
                   PKCS11Provider
                   Port
                   PreferredAuthentications
                   Protocol
                   ProxyCommand
                   PubkeyAuthentication
                   RekeyLimit
                   RhostsRSAAuthentication
                   RSAAuthentication
                   SendEnv
                   ServerAliveInterval
                   ServerAliveCountMax
                   StrictHostKeyChecking
                   TCPKeepAlive
                   UpdateHostKeys
                   UsePrivilegedPort
                   User
                   UserKnownHostsFile
                   VerifyHostKeyDNS
@end display
@item     -P port @anchor{man_ssh_sftp -P port}
             Указывает порт для подключения на удаленном хосте.

@item     -p @anchor{man_ssh_sftp p}
             Сохраняет время модификации, время доступа и режимы из исходных файлов,
             переданных.

@item     -q @anchor{man_ssh_sftp q}
             Тихий режим: отключает индикатор хода выполнения, а также предупреждающие
             и диагностические сообщения от ssh(1).

@item     -R num_requests @anchor{man_ssh_sftp -R num_requests}
             Укажите, сколько запросов может быть ожидающим одновременно. Увеличение
             этого значения может немного улучшить скорость передачи файлов, но увеличит
             использование памяти. По умолчанию 64 невыполненных запроса.

@item     -r @anchor{man_ssh_sftp r}
             При загрузке и выгрузке рекурсивно копируйте целые каталоги. Обратите
             внимание, что sftp не следует символическим ссылкам, встречающимся в
             обходе дерева.

@item     -S program @anchor{man_ssh_sftp -S program}
             Название программы, используемой для зашифрованного соединения. Программа
             должна понимать опции ssh(1).

@item     -s subsystem | sftp_server @anchor{man_ssh_sftp -s subsystem | sftp_server}
             Задает подсистему SSH2 или путь к серверу sftp на удаленном хосте. Путь
             полезен для использования sftp поверх протокола версии 1 или когда на
             удаленном sshd(8) не настроена подсистема sftp.

@item     -v @anchor{man_ssh_sftp v}
             Поднимите уровень регистрации. Эта опция также передается в ssh.
@end table
@item INTERACTIVE COMMANDS
     Находясь в интерактивном режиме, sftp понимает набор команд, аналогичных командам
     ftp(1). Команды не чувствительны к регистру. Пути, содержащие пробелы, должны быть
     заключены в кавычки. Любые специальные символы, содержащиеся в путевых именах,
     которые распознаются glob(3), должны быть экранированы с помощью обратной косой
     черты (‘\’).
@table @asis
@item     bye @anchor{man_ssh_sftp bye}
             Выйти из sftp.

@item     cd path @anchor{man_ssh_sftp cd path}
             Измените удаленный каталог на путь.

@item     chgrp grp path @anchor{man_ssh_sftp chgrp grp path}
             Измените группу файла path на grp. path может содержать символы glob(3) и
             может соответствовать нескольким файлам. grp должен быть числовым GID.

@item     chmod mode path @anchor{man_ssh_sftp chmod mode path}
             Измените права доступа к файлу path на mode. path может содержать
             символы glob(3) и может соответствовать нескольким файлам.

@item     chown own path @anchor{man_ssh_sftp chown own path}
             Измените владельца файла path на own. path может содержать символы
             glob(3) и может соответствовать нескольким файлам. own должен быть
             числовым UID.

@item     df [-hi] [path] @anchor{man_ssh_sftp df [-hi] [path]}
             Вывести информацию об использовании для файловой системы, содержащей
             текущий каталог (или path, если указан). Если указан флаг -h, информация
             о емкости будет отображаться с использованием суффиксов "human-readable"
             (удобочитаемых). Флаг -i запрашивает отображение информации об узле в
             дополнение к информации о емкости. Эта команда поддерживается только на
             серверах, которые реализуют расширение “statvfs@@openssh.com”.

@item     exit @anchor{man_ssh_sftp exit}
             Завершить sftp.

@item     get [-@ref{man_ssh_sftp_get a,, a}@ref{man_ssh_sftp_get f,, f}@ref{man_ssh_sftp_get P|p,, Pp}@ref{man_ssh_sftp_get r,, r}] remote-path [local-path] @anchor{man_ssh_sftp get [-afPpr] remote-path [local-path]}
             Получите удаленный путь и сохраните его на локальном компьютере. Если
             локальный путь не указан, ему присваивается то же имя, что и на удаленном
             компьютере. Удаленный путь может содержать символы glob(3) и может
             соответствовать нескольким файлам. Если это так и указан local-path,
             то local-path должен указывать директорию.
@table @asis
@item -a @anchor{man_ssh_sftp_get a}
             Если указан флаг -a, попытайтесь возобновить частичную передачу существующих
             файлов. Обратите внимание, что возобновление предполагает, что любая
             частичная копия локального файла соответствует удаленной копии. Если
             содержимое удаленного файла отличается от частичной локальной копии, то
             результирующий файл может быть поврежден.
@item -f @anchor{man_ssh_sftp_get f}
             Если указан флаг -f, то после завершения передачи файла будет вызван
             fsync(2) для сброса файла на диск.
@item P|p @anchor{man_ssh_sftp_get P|p}
             Если указан флаг -P или -p, то также копируются полные разрешения и
             время доступа к файлу.
@item -r @anchor{man_ssh_sftp_get r}
             Если указан флаг -r, то каталоги будут копироваться рекурсивно. Обратите
             внимание, что sftp не следует по символическим ссылкам при выполнении
             рекурсивных передач.
@end table
@item     help @anchor{man_ssh_sftp help}
             Показать текст справки.

@item     lcd path @anchor{man_ssh_sftp lcd path}
             Изменить локальный каталог на path.

@item     lls [ls-options [path]] @anchor{man_ssh_sftp lls [ls-options [path]]}
             Показать список локальных каталогов либо path, либо текущего каталога, если
             путь не указан. ls-options может содержать любые флаги, поддерживаемые
             командой ls(1) локальной системы. path может содержать символы glob(3) и
             может соответствовать нескольким файлам.

@item     lmkdir path @anchor{man_ssh_sftp lmkdir path}
             Создать локальный каталог, указанный в path.

@item     ln [-s] oldpath newpath @anchor{man_ssh_sftp ln [-s] oldpath newpath}
             Создайте ссылку от oldpath до newpath. Если указан флаг -s, созданная
             ссылка является символической ссылкой, в противном случае это жесткая
             ссылка.

@item     lpwd @anchor{man_ssh_sftp lpwd}
             Распечатать локальный рабочий каталог.

@item     ls [-@ref{man_ssh_sftp_ls 1,, 1}@ref{man_ssh_sftp_ls a,, a}@ref{man_ssh_sftp_ls f,, f}@ref{man_ssh_sftp_ls h,, h}@ref{man_ssh_sftp_ls l,, l}@ref{man_ssh_sftp_ls n,, n}@ref{man_ssh_sftp_ls r,, r}@ref{man_ssh_sftp_ls S,, S}@ref{man_ssh_sftp_ls t,, t}] [path] @anchor{man_ssh_sftp ls [-1afhlnrSt] [path]}
             Вывести список удаленных каталогов либо path, либо текущего каталога, если
             path не указан. path может содержать символы glob(3) и может соответствовать
             нескольким файлам.

             Следующие флаги распознаются и соответственно изменяют поведение ls:
@table @asis
@item             -1 @anchor{man_ssh_sftp_ls 1}
                     Произвести вывод в один столбец.

@item             -a @anchor{man_ssh_sftp_ls a}
                     Список файлов, начинающихся с точки (‘.’).

@item             -f @anchor{man_ssh_sftp_ls f}
                     Не сортируйте список. Порядок сортировки по умолчанию является
                     лексикографическим.

@item             -h @anchor{man_ssh_sftp_ls h}
                     При использовании с параметром длинного формата используйте суффиксы
                     единиц: Byte, Kilobyte, Megabyte, Gigabyte, Terabyte, Petabyte, и
                     Exabyte, чтобы уменьшить количество цифр до четырех или менее,
                     используя степени 2 для размеров (K=1024, M=1048576 и т.д.).

@item             -l @anchor{man_ssh_sftp_ls l}
                     Показать дополнительную информацию, включая разрешения и
                     информацию о владельце.

@item             -n @anchor{man_ssh_sftp_ls n}
                     Создайте длинный список с информацией о пользователях и группах
                     в числовом формате.

@item             -r @anchor{man_ssh_sftp_ls r}
                     Обратный порядок сортировки списка.

@item             -S @anchor{man_ssh_sftp_ls S}
                     Сортировать список по размеру файла.

@item             -t @anchor{man_ssh_sftp_ls t}
                     Сортировать список по времени последнего изменения.
@end table

@item     lumask umask @anchor{man_ssh_sftp lumask umask}
             Установите для локального umask значение umask.

@item     mkdir path @anchor{man_ssh_sftp mkdir path}
             Создать удаленный каталог, указанный в path.

@item     progress @anchor{man_ssh_sftp progress}
             Переключить отображение индикатора прогресса.

@item     put [-afPpr] local-path [remote-path] @anchor{man_ssh_sftp put [-afPpr] local-path [remote-path]}
             Загрузите local-path и сохраните его на удаленном компьютере. Если имя
             удаленного пути не указано, ему присваивается то же имя, что и на локальном
             компьютере. local-path может содержать символы glob(3) и может
             соответствовать нескольким файлам. Если это так и указан remote-path, то
             remote-path должен указать каталог.
@table @asis
@item a
             Если указан флаг -a, попытайтесь возобновить частичную передачу существующих
             файлов. Обратите внимание, что возобновление предполагает, что любая частичная
             копия удаленного файла соответствует локальной копии. Если содержимое
             локального файла отличается от удаленной локальной копии, то результирующий
             файл может быть поврежден.
@item f
             Если указан флаг -f, то после отправки файла на сервер будет отправлен запрос
             на вызов fsync(2). Обратите внимание, что это поддерживается только серверами,
             которые реализуют расширение "fsync@@openssh.com".
@item P|p
             Если указан флаг -P или -p, то также копируются полные разрешения и
             время доступа к файлу.

@item r
             Если указан флаг -r, то каталоги будут копироваться рекурсивно. Обратите
             внимание, что sftp не следует по символическим ссылкам при выполнении
             рекурсивных передач.
@end table
@item     pwd @anchor{man_ssh_sftp pwd}
             Показать удаленный рабочий каталог.

@item     quit @anchor{man_ssh_sftp quit}
             Завершить sftp.

@item     reget [-Ppr] remote-path [local-path] @anchor{man_ssh_sftp reget [-Ppr] remote-path [local-path]}
             Возобновить загрузку remote-path. Эквивалентно получить с установленным
             флагом -a.

@item     reput [-Ppr] [local-path] remote-path @anchor{man_ssh_sftp reput [-Ppr] [local-path] remote-path}
             Возобновить загрузку [local-path]. Эквиваленто установленному флагу -a.

@item     rename oldpath newpath @anchor{man_ssh_sftp rename oldpath newpath}
             Переименовать удаленный файл из oldpath в newpath.

@item     rm path @anchor{man_ssh_sftp rm path}
             Удалить удаленный файл, указанный в path.

@item     rmdir path @anchor{man_ssh_sftp rmdir path}
             Удалить удаленный каталог, указанный в path.

@item     symlink oldpath newpath @anchor{man_ssh_sftp symlink oldpath newpath}
             Создайте символическую ссылку от oldpath до newpath.

@item     version @anchor{man_ssh_sftp version}
             Показать версию протокола sftp.

@item     !command @anchor{man_ssh_sftp !command}
             Выполните command в локальной оболочке.

@item     ! @anchor{man_ssh_sftp !}
             Перейти в локальную оболочку.

@item     ? @anchor{man_ssh_sftp ?}
             Синоним для help.
@end table

@item SEE ALSO
     ftp(1), ls(1), scp(1), ssh(1), ssh-add(1), ssh-keygen(1), glob(3),
     ssh_config(5), sftp-server(8), sshd(8)

     T. Ylonen and S. Lehtinen, SSH File Transfer Protocol, draft-ietf-secsh-
     filexfer-00.txt, January 2001, work in progress material.

BSD                           September 25, 2015                           BSD
@end table
